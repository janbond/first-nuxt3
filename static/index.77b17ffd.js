import{_ as J}from"./client-only.db088448.js";import{_ as K,t as P,a as B}from"./dataTranslate.179b2917.js";import{_ as Q}from"./ForumFooter.84db82b0.js";import{f as W,h as d,s as X,i as A,j as Z,r as F,c as o,a as s,n as $,b as u,w as p,k as ee,v as se,g as f,l as te,F as N,m as k,t as a,q as oe,o as t,x as m,p as ne,e as ae}from"./entry.ed4fbfbb.js";import{u as le}from"./index.d42ea983.js";import{_ as ie}from"./_plugin-vue_export-helper.c27b6911.js";const ce={async setup(){const i=W(),r=le(),C=d(1),n=i.path,{allNews:b,newsList:E,totalPage:D,newsCategory:y,isAllNewsLoading:w,isNewsListLoading:M}=X(r);await r.getNewsList(n,C),r.getAllNews();const c=d(""),e=d([]),_=d(!1);d(!1);const v=d(null),I=d(null),O=A(()=>{if(c.value===""&&e.value.length===0)return"normal";if(c.value!==""&&e.value.length===0)return"search";if(c.value===""&&e.value.length!==0)return"date";if(c.value!==""&&e.value.length!==0)return"normal"}),V=A(()=>c.value?(console.log("正在搜尋",h.value),b.value.filter(l=>{if(c.value){let g=l.noticeTitle.match(c.value);return l.noticeDetailNohtml.match(c.value)||g}})):(console.log("沒有搜尋"),this.tenNews));Z(c,(l,g)=>{_.value=!1,e.value=[],Y()});const j=async(l,g)=>{c.value="",e.value=[],await r.getNewsList(l,g)},R=async l=>{C.value=l,console.log("取得頁碼",l),await r.getNewsList(n,l)},q=d({width:0,height:0}),T=d(!1),h=d([]),S=d([]),z=()=>{console.log("執行年月份分類",h.value,_.value),c.value="",h.value=[],S.value=[],_.value=!_.value},U=l=>{v.value!==l&&(Y(),v.value=l),console.log("打開年分",h.value),h.value[l].classList.toggle("active"),S.value[l].classList.toggle("active")},Y=()=>{h.value.forEach(l=>{l.classList.remove("active")}),S.value.forEach(l=>{l.classList.remove("active")})};return{allNews:b,currentPage:C,newsList:E,totalPage:D,newsCategory:y,isAllNewsLoading:w,isNewsListLoading:M,isNewsSideMenuShow:_,itemToggleTitle:h,itemToggleInner:S,forumSearch:c,selNewsCont:e,window:q,isShow:T,postDate:I,showMainCondition:O,resultForum:V,getCurrentPage:R,mobileOpen:()=>{T.value=!T.value},getNewsActions:j,openNewsSideMenu:z,openNewsSideYear:U,selNewsYear:(l,g)=>{c.value="",I.value=Object.values({year:l,month:g}).toString().replace(/(-|,)/g," / ");const H=y.value.filter(x=>x.year.id.match(l))[0].year.months.find(x=>Number(x.id)===Number(g));e.value=H.data}}},computed:{},watch:{},methods:{}},L=i=>(ne("data-v-fd2f9b94"),i=i(),ae(),i),re={class:"forumCont"},de={class:"searchBox"},ue={class:"sideMenu"},_e={key:0,class:"loadingMask"},ve=L(()=>s("div",{class:"spinner-border text-warning",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),he=[ve],ge={class:"newsCategoryBlock"},fe={key:0,class:"newsCategoryBox fs-5"},me=["onClick"],ye=["onClick"],we={class:"forumArticleBlock"},pe={class:"forumArticleList"},Ne={key:0,class:"iNewsBox"},ke={key:0,class:"loadingMask"},Ce=L(()=>s("div",{class:"spinner-border text-warning",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),De=[Ce],Se=L(()=>s("div",{class:"forumBreadCrumb"},[s("ul",null,[s("li",null," 全部公告 ")])],-1)),Le={class:"date"},be={class:"day"},Me={class:"month"},Ie={class:"year"},Te={key:0,class:"type"},xe={key:1,class:"type"},Pe={class:"pic"},Be=["src","alt"],Ee=["src","alt"],Ye={class:"info"},Ae={class:"ti"},Fe={class:"txt fs-6"},Oe={key:1,class:"iNewsBox"},Ve={class:"forumBreadCrumb"},je={class:"date"},Re={class:"day"},qe={class:"month"},ze={class:"year"},Ue={key:0,class:"type"},Ge={key:1,class:"type"},He={class:"pic"},Je=["src","alt"],Ke=["src","alt"],Qe={class:"info"},We={class:"ti"},Xe={class:"txt fs-6"},Ze={key:2,class:"iNewsBox"},$e=L(()=>s("div",{class:"forumBreadCrumb"},[s("ul",null,[s("li",null," 搜尋結果 ")])],-1)),es={class:"date"},ss={class:"day"},ts={class:"month"},os={class:"year"},ns={key:0,class:"type"},as={key:1,class:"type"},ls={class:"pic"},is=["src","alt"],cs=["src","alt"],rs={class:"info"},ds={class:"ti"},us={class:"txt fs-6"};function _s(i,r,C,n,b,E){const D=F("font-awesome-icon"),y=J,w=F("router-link"),M=K,c=Q;return t(),o("div",null,[s("div",re,[s("section",{class:$(["forumSidebar",{open:n.isShow}]),ref:"mobileOpenRef"},[s("div",{class:"mobileBtn",onClick:r[0]||(r[0]=e=>n.mobileOpen())},[u(y,null,{default:p(()=>[u(D,{icon:"fas fa-angle-right"})]),_:1})]),s("div",de,[u(y,null,{default:p(()=>[u(D,{icon:"fas fa-magnifying-glass",class:"glass"})]),_:1}),ee(s("input",{type:"text",class:"form-control fs-5",id:"search",placeholder:"","onUpdate:modelValue":r[1]||(r[1]=e=>n.forumSearch=e)},null,512),[[se,n.forumSearch]])]),s("div",ue,[n.isAllNewsLoading===!0?(t(),o("div",_e,he)):f("",!0),s("ul",null,[s("li",null,[s("button",{type:"button",class:"fs-5",onClick:r[2]||(r[2]=te(e=>n.getNewsActions(),["prevent"]))},"全部")]),s("li",null,[s("div",ge,[s("button",{type:"button",class:"fs-5",onClick:r[3]||(r[3]=e=>n.openNewsSideMenu())},"新聞"),n.isNewsSideMenuShow?(t(),o("div",fe,[(t(!0),o(N,null,k(n.newsCategory,(e,_)=>(t(),o("div",{class:"yearMenu",key:e.id},[s("div",{class:"openYearBtn",onClick:v=>n.openNewsSideYear(_),ref_for:!0,ref:"itemToggleTitle"},"‧"+a(e.year.id)+"年",9,me),s("div",{class:"openYearList",ref_for:!0,ref:"itemToggleInner"},[s("ul",null,[(t(!0),o(N,null,k(e.year.months,v=>(t(),o("li",{key:v.id,onClick:I=>n.selNewsYear(e.year.id,v.id)},"└─"+a(e.year.id)+"年"+a(v.id)+"月",9,ye))),128))])],512)]))),128))])):f("",!0)])])])])],2),s("section",we,[s("div",pe,[n.showMainCondition==="normal"?(t(),o("div",Ne,[n.isNewsListLoading===!0?(t(),o("div",ke,De)):f("",!0),Se,(t(!0),o(N,null,k(n.newsList,e=>(t(),o("div",{class:"iNewsList",key:e.noticeIndex},[s("div",Le,[s("div",be,a(("translateDay"in i?i.translateDay:m(P))(e.createDate)),1),s("div",Me,a(("translateMonth"in i?i.translateMonth:m(B))(e.createDate)),1),s("div",Ie,a(e.createDate.slice(0,4)),1),e.typeName!==null?(t(),o("div",Te,a(e.typeName),1)):(t(),o("div",xe,"新聞稿"))]),s("div",Pe,[e.coverImage!==""?(t(),o("img",{key:0,src:e.coverImage,alt:e.noticeTitle},null,8,Be)):(t(),o("img",{key:1,src:"./images/g_news_list_def.jpg",alt:e.noticeTitle},null,8,Ee))]),s("div",Ye,[u(w,{to:`/forum/${e.noticeIndex}`,class:"link"},{default:p(()=>[s("div",Ae,a(e.noticeTitle),1),s("div",Fe,a(e.noticeDetailNohtml),1)]),_:2},1032,["to"])])]))),128))])):f("",!0),n.showMainCondition==="date"?(t(),o("div",Oe,[s("div",Ve,[s("ul",null,[s("li",null,a(n.postDate)+"月份公告 ",1)])]),(t(!0),o(N,null,k(n.selNewsCont,e=>(t(),o("div",{class:"iNewsList",key:e.noticeIndex},[s("div",je,[s("div",Re,a(("translateDay"in i?i.translateDay:m(P))(e.createDate)),1),s("div",qe,a(("translateMonth"in i?i.translateMonth:m(B))(e.createDate)),1),s("div",ze,a(e.createDate.slice(0,4)),1),e.typeName!==null?(t(),o("div",Ue,a(e.typeName),1)):(t(),o("div",Ge,"新聞稿"))]),s("div",He,[e.coverImage!==""?(t(),o("img",{key:0,src:e.coverImage,alt:e.noticeTitle},null,8,Je)):(t(),o("img",{key:1,src:"./images/g_news_list_def.jpg",alt:e.noticeTitle},null,8,Ke))]),s("div",Qe,[u(w,{to:`/forum/${e.noticeIndex}`,class:"link"},{default:p(()=>[s("div",We,a(e.noticeTitle),1),s("div",Xe,a(e.noticeDetailNohtml),1)]),_:2},1032,["to"])])]))),128))])):f("",!0),n.showMainCondition==="search"?(t(),o("div",Ze,[$e,(t(!0),o(N,null,k(n.resultForum,e=>(t(),o("div",{class:"iNewsList",key:e.noticeIndex},[s("div",es,[s("div",ss,a(("translateDay"in i?i.translateDay:m(P))(e.createDate)),1),s("div",ts,a(("translateMonth"in i?i.translateMonth:m(B))(e.createDate)),1),s("div",os,a(e.createDate.slice(0,4)),1),e.typeName!==null?(t(),o("div",ns,a(e.typeName),1)):(t(),o("div",as,"新聞稿"))]),s("div",ls,[e.coverImage!==""?(t(),o("img",{key:0,src:e.coverImage,alt:e.noticeTitle},null,8,is)):(t(),o("img",{key:1,src:"./images/g_news_list_def.jpg",alt:e.noticeTitle},null,8,cs))]),s("div",rs,[u(w,{to:`/forum/${e.noticeIndex}`,class:"link"},{default:p(()=>[s("div",ds,a(e.noticeTitle),1),s("div",us,a(e.noticeDetailNohtml),1)]),_:2},1032,["to"])])]))),128))])):f("",!0),n.showMainCondition==="normal"?(t(),oe(M,{key:3,pages:n.totalPage,currentPage:n.currentPage,onEmitPage:n.getCurrentPage,onEmitSelectPage:n.getCurrentPage,onEmitInputPage:n.getCurrentPage},null,8,["pages","currentPage","onEmitPage","onEmitSelectPage","onEmitInputPage"])):f("",!0)]),u(c)])])])}const ks=ie(ce,[["render",_s],["__scopeId","data-v-fd2f9b94"]]);export{ks as default};
